{
  "swagger": "2.0",
  "info": {
    "title": "Delivery API",
    "description": "API for the Delivery service",
    "version": "1.0",
    "contact": {
      "name": "API Support",
      "email": "support@example.com"
    }
  },
  "tags": [
    {
      "name": "Delivery"
    }
  ],
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v1/canvases": {
      "post": {
        "summary": "Create a new canvas",
        "description": "Creates a new canvas with the given name and organization ID",
        "operationId": "Delivery_CreateCanvas",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryCreateCanvasResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryCreateCanvasRequest"
            }
          }
        ],
        "tags": [
          "Canvas"
        ]
      }
    },
    "/api/v1/canvases/{canvasId}/event-sources": {
      "get": {
        "summary": "List event sources",
        "description": "Returns a list of all event sources for the specified canvas",
        "operationId": "Delivery_ListEventSources",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryListEventSourcesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "organizationId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "EventSource"
        ]
      },
      "post": {
        "summary": "Create a new event source",
        "description": "Creates a new event source for the specified canvas",
        "operationId": "Delivery_CreateEventSource",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryCreateEventSourceResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryCreateEventSourceBody"
            }
          }
        ],
        "tags": [
          "EventSource"
        ]
      }
    },
    "/api/v1/canvases/{canvasId}/event-sources/{id}": {
      "get": {
        "summary": "Get event source details",
        "description": "Returns the details of a specific event source",
        "operationId": "Delivery_DescribeEventSource",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryDescribeEventSourceResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "organizationId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "EventSource"
        ]
      }
    },
    "/api/v1/canvases/{canvasId}/stages": {
      "get": {
        "summary": "List stages",
        "description": "Returns a list of all stages for the specified canvas",
        "operationId": "Delivery_ListStages",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryListStagesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "organizationId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Stage"
        ]
      },
      "post": {
        "summary": "Create a new stage",
        "description": "Creates a new stage for the specified canvas",
        "operationId": "Delivery_CreateStage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryCreateStageResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryCreateStageBody"
            }
          }
        ],
        "tags": [
          "Stage"
        ]
      }
    },
    "/api/v1/canvases/{canvasId}/stages/{id}": {
      "get": {
        "summary": "Get stage details",
        "description": "Returns the details of a specific stage",
        "operationId": "Delivery_DescribeStage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryDescribeStageResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "organizationId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Stage"
        ]
      },
      "patch": {
        "summary": "Update a stage",
        "description": "Updates the specified stage",
        "operationId": "Delivery_UpdateStage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryUpdateStageResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "description": "Added for REST API path",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryUpdateStageBody"
            }
          }
        ],
        "tags": [
          "Stage"
        ]
      }
    },
    "/api/v1/canvases/{canvasId}/stages/{stageId}/events": {
      "get": {
        "summary": "List stage events",
        "description": "Returns a list of events for the specified stage",
        "operationId": "Delivery_ListStageEvents",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryListStageEventsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "stageId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "organizationId",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "states",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "STATE_UNKNOWN",
                "STATE_PENDING",
                "STATE_WAITING",
                "STATE_PROCESSED"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "stateReasons",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "STATE_REASON_UNKNOWN",
                "STATE_REASON_APPROVAL",
                "STATE_REASON_TIME_WINDOW",
                "STATE_REASON_EXECUTION",
                "STATE_REASON_CONNECTION",
                "STATE_REASON_CANCELLED",
                "STATE_REASON_UNHEALTHY"
              ]
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "Event"
        ]
      }
    },
    "/api/v1/canvases/{canvasId}/stages/{stageId}/events/{eventId}/approve": {
      "post": {
        "summary": "Approve a stage event",
        "description": "Approves the specified stage event",
        "operationId": "Delivery_ApproveStageEvent",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryApproveStageEventResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "canvasId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "stageId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "eventId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryApproveStageEventBody"
            }
          }
        ],
        "tags": [
          "Event"
        ]
      }
    },
    "/api/v1/canvases/{id}": {
      "get": {
        "summary": "Get canvas details",
        "description": "Returns the details of a specific canvas",
        "operationId": "Delivery_DescribeCanvas",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryDescribeCanvasResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "organizationId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Canvas"
        ]
      }
    },
    "/api/v1/stages/{stageId}/tags": {
      "get": {
        "summary": "List tags",
        "description": "Returns a list of tags, optionally filtered by stage",
        "operationId": "Delivery_ListTags2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryListTagsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "stageId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "name",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "value",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "states",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "TAG_STATE_UNKNOWN",
                "TAG_STATE_HEALTHY",
                "TAG_STATE_UNHEALTHY"
              ]
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "Tag"
        ]
      }
    },
    "/api/v1/tags": {
      "get": {
        "summary": "List tags",
        "description": "Returns a list of tags, optionally filtered by stage",
        "operationId": "Delivery_ListTags",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryListTagsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "value",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "states",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "TAG_STATE_UNKNOWN",
                "TAG_STATE_HEALTHY",
                "TAG_STATE_UNHEALTHY"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "stageId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Tag"
        ]
      },
      "put": {
        "summary": "Update tag state",
        "description": "Updates the state of the specified tag",
        "operationId": "Delivery_UpdateTagState",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeliveryUpdateTagStateResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryUpdateTagStateRequest"
            }
          }
        ],
        "tags": [
          "Tag"
        ]
      }
    }
  },
  "definitions": {
    "ConnectionDataFilter": {
      "type": "object",
      "properties": {
        "expression": {
          "type": "string"
        }
      }
    },
    "ConnectionFilter": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/ConnectionFilterType"
        },
        "data": {
          "$ref": "#/definitions/ConnectionDataFilter"
        },
        "header": {
          "$ref": "#/definitions/ConnectionHeaderFilter"
        }
      }
    },
    "ConnectionFilterOperator": {
      "type": "string",
      "enum": [
        "FILTER_OPERATOR_AND",
        "FILTER_OPERATOR_OR"
      ],
      "default": "FILTER_OPERATOR_AND",
      "title": "Filters can be combined in two ways:\n  - FILTER_OPERATOR_AND: all filters must be true (default)\n  - FILTER_OPERATOR_OR: at least one filter must be true"
    },
    "ConnectionFilterType": {
      "type": "string",
      "enum": [
        "FILTER_TYPE_UNKNOWN",
        "FILTER_TYPE_DATA",
        "FILTER_TYPE_HEADER"
      ],
      "default": "FILTER_TYPE_UNKNOWN"
    },
    "ConnectionHeaderFilter": {
      "type": "object",
      "properties": {
        "expression": {
          "type": "string"
        }
      }
    },
    "DeliveryApproveStageEventBody": {
      "type": "object",
      "properties": {
        "organizationId": {
          "type": "string"
        },
        "requesterId": {
          "type": "string"
        }
      }
    },
    "DeliveryApproveStageEventResponse": {
      "type": "object",
      "properties": {
        "event": {
          "$ref": "#/definitions/DeliveryStageEvent"
        }
      }
    },
    "DeliveryCanvas": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "organizationId": {
          "type": "string"
        },
        "createdBy": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "DeliveryCondition": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/DeliveryConditionType"
        },
        "approval": {
          "$ref": "#/definitions/DeliveryConditionApproval"
        },
        "timeWindow": {
          "$ref": "#/definitions/DeliveryConditionTimeWindow"
        }
      }
    },
    "DeliveryConditionApproval": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "DeliveryConditionTimeWindow": {
      "type": "object",
      "properties": {
        "start": {
          "type": "string"
        },
        "end": {
          "type": "string"
        },
        "weekDays": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "DeliveryConditionType": {
      "type": "string",
      "enum": [
        "CONDITION_TYPE_UNKNOWN",
        "CONDITION_TYPE_APPROVAL",
        "CONDITION_TYPE_TIME_WINDOW"
      ],
      "default": "CONDITION_TYPE_UNKNOWN"
    },
    "DeliveryConnection": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/DeliveryConnectionType"
        },
        "name": {
          "type": "string"
        },
        "filters": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ConnectionFilter"
          }
        },
        "filterOperator": {
          "$ref": "#/definitions/ConnectionFilterOperator"
        }
      }
    },
    "DeliveryConnectionType": {
      "type": "string",
      "enum": [
        "TYPE_UNKNOWN",
        "TYPE_EVENT_SOURCE",
        "TYPE_STAGE"
      ],
      "default": "TYPE_UNKNOWN"
    },
    "DeliveryCreateCanvasRequest": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "organizationId": {
          "type": "string"
        },
        "requesterId": {
          "type": "string"
        }
      }
    },
    "DeliveryCreateCanvasResponse": {
      "type": "object",
      "properties": {
        "canvas": {
          "$ref": "#/definitions/DeliveryCanvas"
        }
      }
    },
    "DeliveryCreateEventSourceBody": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "organizationId": {
          "type": "string"
        },
        "requesterId": {
          "type": "string"
        }
      }
    },
    "DeliveryCreateEventSourceResponse": {
      "type": "object",
      "properties": {
        "eventSource": {
          "$ref": "#/definitions/DeliveryEventSource"
        },
        "key": {
          "type": "string"
        }
      }
    },
    "DeliveryCreateStageBody": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "organizationId": {
          "type": "string"
        },
        "requesterId": {
          "type": "string"
        },
        "connections": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryConnection"
          }
        },
        "conditions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryCondition"
          }
        },
        "use": {
          "$ref": "#/definitions/DeliveryTagUsageDefinition"
        },
        "runTemplate": {
          "$ref": "#/definitions/DeliveryRunTemplate"
        }
      }
    },
    "DeliveryCreateStageResponse": {
      "type": "object",
      "properties": {
        "stage": {
          "$ref": "#/definitions/DeliveryStage"
        }
      }
    },
    "DeliveryDescribeCanvasResponse": {
      "type": "object",
      "properties": {
        "canvas": {
          "$ref": "#/definitions/DeliveryCanvas"
        }
      }
    },
    "DeliveryDescribeEventSourceResponse": {
      "type": "object",
      "properties": {
        "eventSource": {
          "$ref": "#/definitions/DeliveryEventSource"
        }
      }
    },
    "DeliveryDescribeStageResponse": {
      "type": "object",
      "properties": {
        "stage": {
          "$ref": "#/definitions/DeliveryStage"
        }
      }
    },
    "DeliveryEventSource": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "organizationId": {
          "type": "string"
        },
        "canvasId": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "DeliveryListEventSourcesResponse": {
      "type": "object",
      "properties": {
        "eventSources": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryEventSource"
          }
        }
      }
    },
    "DeliveryListStageEventsResponse": {
      "type": "object",
      "properties": {
        "events": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryStageEvent"
          }
        }
      }
    },
    "DeliveryListStagesResponse": {
      "type": "object",
      "properties": {
        "stages": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryStage"
          }
        }
      }
    },
    "DeliveryListTagsResponse": {
      "type": "object",
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryStageTag"
          }
        }
      }
    },
    "DeliveryRunTemplate": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/DeliveryRunTemplateType"
        },
        "semaphore": {
          "$ref": "#/definitions/DeliverySemaphoreRunTemplate"
        }
      }
    },
    "DeliveryRunTemplateType": {
      "type": "string",
      "enum": [
        "TYPE_UNKNOWN",
        "TYPE_SEMAPHORE"
      ],
      "default": "TYPE_UNKNOWN"
    },
    "DeliverySemaphoreRunTemplate": {
      "type": "object",
      "properties": {
        "projectId": {
          "type": "string"
        },
        "branch": {
          "type": "string"
        },
        "pipelineFile": {
          "type": "string"
        },
        "taskId": {
          "type": "string"
        },
        "parameters": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "DeliveryStage": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "organizationId": {
          "type": "string"
        },
        "canvasId": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "connections": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryConnection"
          }
        },
        "conditions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryCondition"
          }
        },
        "use": {
          "$ref": "#/definitions/DeliveryTagUsageDefinition"
        },
        "runTemplate": {
          "$ref": "#/definitions/DeliveryRunTemplate"
        }
      }
    },
    "DeliveryStageEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "sourceId": {
          "type": "string"
        },
        "sourceType": {
          "$ref": "#/definitions/DeliveryConnectionType"
        },
        "state": {
          "$ref": "#/definitions/DeliveryStageEventState"
        },
        "stateReason": {
          "$ref": "#/definitions/StageEventStateReason"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "approvals": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryStageEventApproval"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/InternalApiDeliveryTag"
          }
        }
      }
    },
    "DeliveryStageEventApproval": {
      "type": "object",
      "properties": {
        "approvedBy": {
          "type": "string"
        },
        "approvedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "DeliveryStageEventState": {
      "type": "string",
      "enum": [
        "STATE_UNKNOWN",
        "STATE_PENDING",
        "STATE_WAITING",
        "STATE_PROCESSED"
      ],
      "default": "STATE_UNKNOWN"
    },
    "DeliveryStageTag": {
      "type": "object",
      "properties": {
        "stageId": {
          "type": "string"
        },
        "stageEventState": {
          "$ref": "#/definitions/DeliveryStageEventState"
        },
        "tag": {
          "$ref": "#/definitions/InternalApiDeliveryTag"
        }
      }
    },
    "DeliveryTagDefinition": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "valueFrom": {
          "type": "string"
        }
      }
    },
    "DeliveryTagState": {
      "type": "string",
      "enum": [
        "TAG_STATE_UNKNOWN",
        "TAG_STATE_HEALTHY",
        "TAG_STATE_UNHEALTHY"
      ],
      "default": "TAG_STATE_UNKNOWN"
    },
    "DeliveryTagUsageDefinition": {
      "type": "object",
      "properties": {
        "from": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryTagDefinition"
          }
        }
      }
    },
    "DeliveryUpdateStageBody": {
      "type": "object",
      "properties": {
        "connections": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DeliveryConnection"
          }
        },
        "requesterId": {
          "type": "string"
        }
      }
    },
    "DeliveryUpdateStageResponse": {
      "type": "object",
      "properties": {
        "stage": {
          "$ref": "#/definitions/DeliveryStage"
        }
      }
    },
    "DeliveryUpdateTagStateRequest": {
      "type": "object",
      "properties": {
        "tag": {
          "$ref": "#/definitions/InternalApiDeliveryTag"
        }
      }
    },
    "DeliveryUpdateTagStateResponse": {
      "type": "object"
    },
    "InternalApiDeliveryTag": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        },
        "state": {
          "$ref": "#/definitions/DeliveryTagState"
        }
      }
    },
    "StageEventStateReason": {
      "type": "string",
      "enum": [
        "STATE_REASON_UNKNOWN",
        "STATE_REASON_APPROVAL",
        "STATE_REASON_TIME_WINDOW",
        "STATE_REASON_EXECUTION",
        "STATE_REASON_CONNECTION",
        "STATE_REASON_CANCELLED",
        "STATE_REASON_UNHEALTHY"
      ],
      "default": "STATE_REASON_UNKNOWN"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
