---
title: "Semaphore"
---

Run and react to your Semaphore workflows

## Triggers

<CardGrid>
  <LinkCard title="On Pipeline Done" href="#on-pipeline-done" description="Listen to Semaphore pipeline done events" />
</CardGrid>

import { CardGrid, LinkCard } from "@astrojs/starlight/components";

## Actions

<CardGrid>
  <LinkCard title="List Pipelines" href="#list-pipelines" description="List pipelines for a Semaphore project or workflow" />
  <LinkCard title="Run Workflow" href="#run-workflow" description="Run Semaphore workflow" />
</CardGrid>

<a id="on-pipeline-done"></a>

## On Pipeline Done

The On Pipeline Done trigger starts a workflow execution when a Semaphore pipeline completes.

### Use Cases

- **Pipeline orchestration**: Chain workflows together based on pipeline completion
- **Status monitoring**: Monitor CI/CD pipeline results
- **Notification workflows**: Send notifications when pipelines succeed or fail
- **Post-processing**: Process artifacts or results after pipeline completion

### Configuration

- **Project**: Select the Semaphore project to monitor

### Event Data

Each pipeline done event includes:
- **pipeline**: Pipeline information including ID, state, and result
- **workflow**: Workflow information including ID and URL
- **project**: Project information
- **result**: Pipeline result (passed, failed, stopped, etc.)
- **state**: Pipeline state (done)

### Webhook Setup

This trigger automatically sets up a Semaphore webhook when configured. The webhook is managed by SuperPlane and will be cleaned up when the trigger is removed.

### Example Data

```json
{
  "data": {
    "blocks": [
      {
        "jobs": [
          {
            "id": "00000-00000-00000-00000-00000",
            "index": 0,
            "name": "Report result to SuperPlane",
            "result": "passed",
            "status": "finished"
          }
        ],
        "name": "Block #1",
        "result": "passed",
        "result_reason": "test",
        "state": "done"
      }
    ],
    "organization": {
      "id": "00000000-0000-0000-0000-000000000000",
      "name": "test"
    },
    "pipeline": {
      "created_at": "2026-01-19T12:00:00Z",
      "done_at": "2026-01-19T12:00:00Z",
      "error_description": "",
      "id": "00000000-0000-0000-0000-000000000000",
      "name": "Initial Pipeline",
      "pending_at": "2026-01-19T12:00:00Z",
      "queuing_at": "2026-01-19T12:00:00Z",
      "result": "passed",
      "result_reason": "test",
      "running_at": "2026-01-19T12:00:00Z",
      "state": "done",
      "stopping_at": "1970-01-01T00:00:00Z",
      "working_directory": ".semaphore",
      "yaml_file_name": "semaphore.yml"
    },
    "project": {
      "id": "00000000-0000-0000-0000-000000000000",
      "name": "test"
    },
    "repository": {
      "slug": "test/test",
      "url": "https://github.com/test/test"
    },
    "revision": {
      "branch": {
        "commit_range": "0000000000000000000000000000000000000000^...0000000000000000000000000000000000000000",
        "name": "test"
      },
      "commit_message": "Merge branch 'test' into test",
      "commit_sha": "0000000000000000000000000000000000000000",
      "pull_request": null,
      "reference": "refs/heads/test",
      "reference_type": "branch",
      "sender": {
        "avatar_url": "https://avatars2.githubusercontent.com/u/0000000000000000000000000000000000000000?s=460\u0026v=4",
        "email": "test@test.com",
        "login": "test"
      },
      "tag": null
    },
    "version": "1.0.0",
    "workflow": {
      "created_at": "2026-01-19T12:00:00Z",
      "id": "00000000-0000-0000-0000-000000000000",
      "initial_pipeline_id": "00000000-0000-0000-0000-000000000000"
    }
  },
  "timestamp": "2026-01-19T12:00:00Z",
  "type": "semaphore.pipeline.done"
}
```

<a id="list-pipelines"></a>

## List Pipelines

The List Pipelines component retrieves pipelines from a Semaphore project or workflow with comprehensive filtering capabilities.

### Use Cases

- **Pipeline monitoring**: List all pipelines and filter by branch, status, or date range
- **CI/CD dashboards**: Build dashboards showing pipeline history and results
- **Branch analysis**: Filter pipelines by branch to track deployment activity
- **Time-range queries**: Find pipelines created or completed within specific time windows

### Configuration

- **Project ID**: The Semaphore project identifier (required if Workflow ID is not provided)
- **Workflow ID**: The workflow identifier (required if Project ID is not provided)
- **Branch Name**: Filter by branch name (optional)
- **YAML File Path**: Filter by pipeline definition file (optional, e.g., .semaphore/semaphore.yml)
- **Created After**: Unix timestamp or ISO date — only return pipelines created after this time (optional)
- **Created Before**: Unix timestamp or ISO date — only return pipelines created before this time (optional)
- **Done After**: Unix timestamp or ISO date — only return pipelines completed after this time (optional)
- **Done Before**: Unix timestamp or ISO date — only return pipelines completed before this time (optional)
- **Result Limit**: Maximum number of pipelines to return, 1-200 (optional, defaults to 100)

### Output

Returns a list of pipelines, each containing:
- Pipeline ID (ppl_id), name, and YAML file path
- Workflow ID (wf_id)
- State (e.g., QUEUING, RUNNING, DONE) and result (e.g., PASSED, FAILED, STOPPED)
- Branch name and commit SHA
- Creation and completion timestamps
- Error description (if any)

### Example Output

```json
{
  "data": [
    {
      "branch_name": "main",
      "commit_sha": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
      "created_at": {
        "seconds": 1769090400
      },
      "done_at": {
        "seconds": 1769090700
      },
      "error_description": "",
      "name": "Deploy",
      "ppl_id": "11111111-1111-1111-1111-111111111111",
      "result": "PASSED",
      "state": "DONE",
      "wf_id": "22222222-2222-2222-2222-222222222222",
      "yml_file_path": ".semaphore/semaphore.yml"
    },
    {
      "branch_name": "feature/something",
      "commit_sha": "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
      "created_at": {
        "seconds": 1769094000
      },
      "done_at": {
        "seconds": 0
      },
      "error_description": "",
      "name": "Test",
      "ppl_id": "33333333-3333-3333-3333-333333333333",
      "result": "",
      "state": "RUNNING",
      "wf_id": "22222222-2222-2222-2222-222222222222",
      "yml_file_path": ".semaphore/semaphore.yml"
    }
  ],
  "timestamp": "2026-01-22T16:00:00Z",
  "type": "semaphore.pipelines"
}
```

<a id="run-workflow"></a>

## Run Workflow

The Run Workflow component triggers a Semaphore CI/CD workflow and waits for it to complete.

### Use Cases

- **CI/CD orchestration**: Trigger builds and deployments from SuperPlane workflows
- **Pipeline automation**: Run Semaphore pipelines as part of workflow automation
- **Multi-stage deployments**: Coordinate complex deployment pipelines
- **Workflow chaining**: Chain multiple Semaphore workflows together

### How It Works

1. Creates and starts a Semaphore workflow with the specified pipeline file and parameters
2. Waits for the pipeline to complete (monitored via webhook and polling)
3. Routes execution based on pipeline result:
   - **Passed channel**: Pipeline completed successfully
   - **Failed channel**: Pipeline failed or was cancelled

### Configuration

- **Project**: Select the Semaphore project containing the workflow
- **Pipeline File**: Path to the pipeline YAML file (e.g., `.semaphore/pipeline.yml`)
- **Ref**: Git reference to run the workflow on (branch, tag, or commit SHA)
- **Commit SHA**: Optional specific commit SHA to run (if not provided, uses latest from ref)
- **Parameters**: Optional workflow parameters as key-value pairs (supports expressions)

### Output Channels

- **Passed**: Emitted when pipeline completes successfully
- **Failed**: Emitted when pipeline fails or is cancelled

### Notes

- The component automatically sets up webhook monitoring for pipeline completion
- Falls back to polling if webhook doesn't arrive
- Can be cancelled, which will stop the running Semaphore workflow

### Example Output

```json
{
  "data": {
    "blocks": [
      {
        "jobs": [
          {
            "id": "00000-00000-00000-00000-00000",
            "index": 0,
            "name": "Job #1",
            "result": "passed",
            "status": "finished"
          }
        ],
        "name": "Block #1",
        "result": "passed",
        "result_reason": "test",
        "state": "done"
      }
    ],
    "organization": {
      "id": "00000000-0000-0000-0000-000000000000",
      "name": "test"
    },
    "pipeline": {
      "created_at": "2026-01-22T15:32:47Z",
      "done_at": "2026-01-22T15:32:55Z",
      "error_description": "",
      "id": "00000000-0000-0000-0000-000000000000",
      "name": "Initial Pipeline",
      "pending_at": "2026-01-22T15:32:48Z",
      "queuing_at": "2026-01-22T15:32:48Z",
      "result": "passed",
      "result_reason": "test",
      "running_at": "2026-01-22T15:32:48Z",
      "state": "done",
      "stopping_at": "1970-01-01T00:00:00Z",
      "working_directory": ".semaphore",
      "yaml_file_name": "semaphore.yml"
    },
    "project": {
      "id": "00000000-0000-0000-0000-000000000000",
      "name": "test"
    },
    "repository": {
      "slug": "test/test",
      "url": "https://github.com/test/test"
    },
    "revision": {
      "branch": {
        "commit_range": "0000000000000000000000000000000000000000^...0000000000000000000000000000000000000000",
        "name": "test"
      },
      "commit_message": "test",
      "commit_sha": "0000000000000000000000000000000000000000",
      "pull_request": null,
      "reference": "refs/heads/test",
      "reference_type": "branch",
      "sender": {
        "avatar_url": "https://example.com/avatar.png",
        "email": "test@test.com",
        "login": "test"
      },
      "tag": null
    },
    "version": "1.0.0",
    "workflow": {
      "created_at": "2026-01-22T15:32:47Z",
      "id": "00000000-0000-0000-0000-000000000000",
      "initial_pipeline_id": "00000000-0000-0000-0000-000000000000"
    }
  },
  "timestamp": "2026-01-22T15:32:56.061430218Z",
  "type": "semaphore.workflow.finished"
}
```

