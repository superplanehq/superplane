---
title: "Cloudflare"
sidebar:
  order: 2
---

Manage Cloudflare zones, rules, and DNS

import { CardGrid, LinkCard } from "@astrojs/starlight/components";

## Components

<CardGrid>
  <LinkCard title="Update Redirect Rule" href="#update-redirect-rule" description="Update a redirect rule in a Cloudflare zone" />
</CardGrid>

## Installation

## Create a Cloudflare API Token

1. Open the [Cloudflare API Tokens page](https://dash.cloudflare.com/profile/api-tokens)
2. Click **Create Token**
3. Click **Get started** next to "Create Custom Token"
4. Configure the token:
   - **Token name**: SuperPlane Integration
   - **Permissions** (click "+ Add more" to add each):
     - Zone / Zone / Read
     - Zone / Dynamic Redirect / Edit
   - **Zone Resources**: Include / All zones _(or select specific zones)_
5. Click **Continue to summary**, then **Create Token**
6. Copy the token and paste it below

> **Note**: The token is only shown once. Store it securely if needed elsewhere.

<a id="update-redirect-rule"></a>

## Update Redirect Rule

Update a redirect rule in a Cloudflare zone

### Configuration

| Name | Label | Type | Required | Description |
| --- | --- | --- | --- | --- |
| zone | Zone | app-installation-resource | yes | The Cloudflare zone containing the redirect rule |
| ruleId | Rule ID | string | yes | The ID of the redirect rule to update |
| description | Rule Description | string | no | A descriptive name for this redirect rule |
| matchType | Match Type | select | yes | - |
| sourceUrlPattern | Source URL Pattern | string | no | URL pattern with wildcards. Use * to match any path segment. Example: https://example.com/old/* |
| expression | Match Expression | text | no | Cloudflare filter expression. Example: (http.host eq "example.com" and http.request.uri.path eq "/old-path") |
| targetUrl | Target URL | string | yes | The URL to redirect to. For wildcard patterns, use $&#123;1&#125;, $&#123;2&#125;, etc. to reference captured groups. |
| statusCode | Status Code | select | yes | - |
| preserveQueryString | Preserve Query String | boolean | no | Whether to preserve the query string when redirecting |
| enabled | Enabled | boolean | no | Whether the redirect rule is enabled |

### Example Output

```json
{
  "enabled": true,
  "rule": {
    "action": "redirect",
    "action_parameters": {
      "from_value": {
        "preserve_query_string": false,
        "status_code": 301,
        "target_url": {
          "value": "https://example.com/new-path"
        }
      }
    },
    "description": "Redirect old path to new path",
    "enabled": true,
    "expression": "http.request.uri.path eq \"/old-path\"",
    "id": "rule_abc123"
  },
  "ruleId": "rule_abc123",
  "zoneId": "zone_xyz789"
}
```

