#!/bin/bash

# Count the number of integrations in SuperPlane
# Integrations are stored as directories in pkg/applications/

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"
INTEGRATIONS_DIR="$REPO_ROOT/pkg/applications"

# Get list of integrations (directories only, excluding . and ..)
integrations=$(find "$INTEGRATIONS_DIR" -mindepth 1 -maxdepth 1 -type d -exec basename {} \; | sort)

if [ -z "$integrations" ]; then
  echo "No integrations found."
  echo ""
  echo "Total integrations: 0"
else
  count=$(echo "$integrations" | grep -c '^')
  echo "Integrations:"
  echo "$integrations" | sed 's/^/  - /'
  echo ""
  echo "Total integrations: $count"
fi
